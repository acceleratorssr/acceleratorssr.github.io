---
layout: post
title: AutoRec
tags: 前沿技术系列
excerpt: 增强丢包恢复机制
---

> 注：本文仅关注于技术的实现，简单证明其可行性，但也因能力有限不能通过实验验证技术的优越性，故不讨论测试部分，详见参考资料；

# 背景问题
&emsp;&emsp;在直播服务等高时效性场景中，如果单纯依靠 On-Off 模式进行丢包恢复，即当发现数据包丢失后，如 CDN 会立刻重传丢失的数据，在这个过程中存在三个主要的问题：
1. 通常为了保证时效性，重传的数据包会有冗余的副本数量，避免出现数据包连续丢失的问题，但当网络抖动导致相当一部分数据丢包后，重传的大量副本可能引发网络阻塞；
2. 恢复机制的 低延迟 依赖于重传时间和接收端的 ack，与第一个问题相对立，即理论上想解决当前问题，则会无限放大第一个问题（冗余的副本数量会无限放大）；
3. 队首阻塞问题，重传的数据需要在网络中按顺序传输，如果丢失了队首的数据，则整个队列的数据都会被阻塞在接收端的内核缓冲区中；

&emsp;&emsp;核心在于**重传的丢失**导致丢包恢复缓慢；

# 解决方案
&emsp;&emsp;通过实现 AutoRec 的增强丢包恢复机制，核心理论在于在 off 期间，基于一定的策略 重新注入 少量副本 以尝试 更快 恢复丢失数据包；而策略部分是通过 在线学习 机制，基于网络当前的服务质量（QoS），即丢包率、延迟、带宽、抖动参数；

# 名词解释

#### On-Off 模式
&emsp;&emsp;指网络中的一种 丢包恢复和重传 的工作模式（即 TCP 使用的模式），从字面上解释，当发生丢包时，触发重传机制 ON，当没有丢包时，重传机制为 OFF；

#### ARQ
&emsp;&emsp;全称为 `Automatic Repeat reQuest`，自动重复请求，是一种丢包恢复机制（TCP 的重传机制正式实现于 ARQ），其原理是当发送方发现接收方发送的包丢失时，会重新发送该包，直到接收方收到该包为止；

&emsp;&emsp;如 Stop and Wait（停止等待）、Go Back N、选择重传，不展开讲了；

&emsp;&emsp;以 TCP 举例来说，实现了两种重传方式：超时重传、快速重传；

&emsp;&emsp;前者意为在超时时间内未收到 ACK 时，会触发重传，后者意为当连续收到 3 个相同的 ACK 后，会立刻触发重传；

# 参考资料
- [http://www.thucsnet.com/wp-content/papers/bo_mm2024.pdf](http://www.thucsnet.com/wp-content/papers/bo_mm2024.pdf)
- [https://dl.acm.org/doi/10.1145/3664647.3681423](https://dl.acm.org/doi/10.1145/3664647.3681423)
- [https://mp.weixin.qq.com/s/uCs8QjYiXNsTgwqok_s_yA](https://mp.weixin.qq.com/s/uCs8QjYiXNsTgwqok_s_yA)